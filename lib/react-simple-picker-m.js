!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("prop-types"),require("react"));else if("function"==typeof define&&define.amd)define(["prop-types","react"],e);else{var n="object"==typeof exports?e(require("prop-types"),require("react")):e(t[void 0],t[void 0]);for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(window,(function(t,e){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e,n){"use strict";n.r(e),n.d(e,"HorizontalList",(function(){return N}));var r=n(1),o=n.n(r),i=n(0),a=n.n(i);function s(t){var e=t instanceof HTMLElement,n=e&&window.getComputedStyle(t).overflowY,r=e&&window.getComputedStyle(t).overflowX,o=r&&"visible"!==r&&"hidden"!==r;return t?n&&"visible"!==n&&"hidden"!==n&&t.scrollHeight>=t.clientHeight||o&&t.scrollWidth>=t.clientWidth?t:s(t.parentNode)||document.body:null}var f=function(t){var e,n=function(n,r){return function(){e=null,t.apply(n,r)}},r=function(){if(null==e){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];e=requestAnimationFrame(n(this,r))}};return r.cancel=function(){return cancelAnimationFrame(e)},r};function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var l=function(){function t(e){var n=e.wrapEle,r=e.contentEle,o=e.items,i=e.itemHeight;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.getScrollTop=function(t){return t.pageYOffset?t.pageYOffset:t.scrollY||t.scrollTop||0},this.wrapEle=n&&void 0!==n?n:window,this.wrap=this.wrapSize(this.wrapEle),this.content=this.contentSize(r,i,o.length),this.itemHeight=i}var e,n,r;return e=t,(n=[{key:"topOffset",value:function(t){return void 0!==t&&t?(t.offsetTop||0)+this.topOffset(t.offsetParent):0}},{key:"wrapSize",value:function(t){var e=t.clientHeight||t.innerHeight,n=this.topOffset(t);return{height:e,topOffset:n,bottomOffset:n+e}}},{key:"contentSize",value:function(t,e,n){return{height:e*n,topOffset:this.topOffset(t)}}},{key:"getVisibleIndex",value:function(){var t=this.getScrollTop(this.wrapEle),e=this.content.topOffset-this.wrap.topOffset,n=Math.floor((t-e)/this.itemHeight),r=Math.ceil(this.wrap.height/this.itemHeight),o=Math.max(0,n);return{startIdx:o,endIdx:o+r-1}}}])&&c(e.prototype,n),r&&c(e,r),t}();function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=m(t);if(e){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(a,t);var e,n,r,i=y(a);function a(){var t;d(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))).state={startIdx:0,endIdx:0,loading:!1,contentHeight:0,topOffset:0},t.handleScroll=function(){t.rafUpdate()},t.rafUpdate=f(t.update),t.handleLoadMore=function(){var e=t.state.loading,n=t.props,r=n.loadMore,o=n.hasMore;e||o&&r&&"function"==typeof r&&(t.setState({loading:!0}),r())},t}return e=a,(n=[{key:"componentDidMount",value:function(){this.init(),this.bindEvents()}},{key:"componentDidUpdate",value:function(t,e){var n=t.items,r=t.itemHeight,o=this.props.items;if(n.length!==o.length){var i=o.length*r;this.setState({loading:!1,contentHeight:i})}}},{key:"componentWillUnmount",value:function(){this.removeEvents()}},{key:"init",value:function(){var t=this.props,e=t.itemHeight,n=t.items;this.wrapNode=s(this.contentEle),this.wrapNode!==document.body&&this.wrapNode||(this.wrapNode=window),this.setState({contentHeight:n.length*e}),this.list=new l({wrapEle:this.wrapNode,contentEle:this.contentEle,items:n,itemHeight:e}),this.update()}},{key:"bindEvents",value:function(){this.wrapNode.addEventListener("scroll",this.handleScroll),this.wrapNode.addEventListener("resize",this.rafUpdate)}},{key:"removeEvents",value:function(){this.wrapNode.removeEventListener("scroll",this.handleScroll),this.wrapNode.removeEventListener("resize",this.rafUpdate)}},{key:"update",value:function(){var t=this.props,e=t.items,n=t.itemHeight,r=this.list.getVisibleIndex(),o=r.startIdx,i=r.endIdx,a=this.state,s=a.startIdx,f=a.endIdx;if(o!==s||i!==f){var c=o*n;this.setState({topOffset:c,startIdx:o,endIdx:i}),i>=e.length-1&&this.handleLoadMore()}}},{key:"render",value:function(){var t=this,e=this.state,n=e.loading,r=e.startIdx,i=e.endIdx,a=e.topOffset,s=e.contentHeight,f=this.props,c=f.itemHeight,l=f.renderItem,u=f.items,d=f.indexKey,p=f.containerStyle,h=f.hasMore,y=f.renderLoader,v=u.slice(r,i+1),m="".concat(s,"px"),b="".concat(a,"px"),w={height:"".concat(c,"px"),boxSizing:"border-box"};return o.a.createElement("div",{style:p},o.a.createElement("div",{ref:function(e){t.contentEle=e},style:{height:m,paddingTop:b,boxSizing:"border-box"}},v.map((function(t){return o.a.createElement("div",{key:d(t),style:w},l(t))}))),y&&"function"==typeof y&&y({hasMore:h,loading:n}))}}])&&p(e.prototype,n),r&&p(e,r),a}(r.Component);function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.propTypes={renderItem:a.a.func.isRequired,indexKey:a.a.func.isRequired,itemHeight:a.a.number,items:a.a.arrayOf(a.a.any).isRequired,containerStyle:a.a.objectOf(a.a.any),loadMore:a.a.func,hasMore:a.a.bool,renderLoader:a.a.func},b.defaultProps={itemHeight:0,containerStyle:null,loadMore:void 0,hasMore:void 0,renderLoader:void 0};var g=function(){function t(e){var n=e.wrapEle,r=e.contentEle,o=e.items,i=e.itemWidth;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.getScrollLeft=function(t){return t.pageXOffset?t.pageXOffset:t.scrollX||t.scrollLeft||0},this.wrapEle=n&&void 0!==n?n:window,this.wrap=this.wrapSize(this.wrapEle),this.content=this.contentSize(r,i,o.length),this.itemWidth=i}var e,n,r;return e=t,(n=[{key:"leftOffset",value:function(t){return void 0!==t&&t?(t.offsetLeft||0)+this.leftOffset(t.offsetParent):0}},{key:"wrapSize",value:function(t){var e=t.clientWidth||t.innerWidth,n=this.leftOffset(t);return{width:e,leftOffset:n,rightOffset:n+e}}},{key:"contentSize",value:function(t,e,n){return{width:e*n,leftOffset:this.leftOffset(t)}}},{key:"getVisibleIndex",value:function(){var t=this.getScrollLeft(this.wrapEle),e=this.content.leftOffset-this.wrap.leftOffset,n=Math.floor((t-e)/this.itemWidth),r=Math.ceil(this.wrap.width/this.itemWidth),o=Math.max(0,n);return{startIdx:o,endIdx:o+r}}}])&&w(e.prototype,n),r&&w(e,r),t}();function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach((function(e){E(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function E(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function I(t,e){return(I=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=k(t);if(e){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return L(this,n)}}function L(t,e){return!e||"object"!==O(e)&&"function"!=typeof e?P(t):e}function P(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var N=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&I(t,e)}(a,t);var e,n,r,i=M(a);function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this)).handleScroll=function(){t.rafUpdate()},t.scrollByIndex=function(e){var n=t.props.itemWidth*e-(t.wrapNode.clientWidth||t.wrapNode.innerWidth)/2;t.left=n,t.scrollLeftTo(t.wrapNode,n,200)},t.scrollLeftTo=function(t,e,n){var r=t,o=r.scrollLeft,i=null,a=n||500;window.requestAnimationFrame((function t(n){if(i=i||n,o<e){var s=n-i;r.scrollLeft=(e-o)*s/a+o,s<a?window.requestAnimationFrame(t):r.scrollLeft=e}else{var f=n-i;r.scrollLeft=o-(o-e)*f/a,f<a?window.requestAnimationFrame(t):r.scrollLeft=e}}))},t.handleLoadMore=function(){var e=t.state.loading,n=t.props,r=n.loadMore,o=n.hasMore;e||o&&r&&"function"==typeof r&&(t.setState({loading:!0}),r())},t.state={startIdx:0,endIdx:0,loading:!1,contentWidth:0,leftOffset:0},t.update=t.update.bind(P(t)),t.rafUpdate=f(t.update),t}return e=a,(n=[{key:"componentDidMount",value:function(){this.init(),this.bindEvents()}},{key:"componentDidUpdate",value:function(t,e){var n=t.items,r=t.itemWidth,o=this.props.items;if(n.length!==o.length){var i=o.length*r;this.setState({loading:!1,contentWidth:i})}}},{key:"componentWillUnmount",value:function(){this.removeEvents()}},{key:"init",value:function(){var t=this.props,e=t.itemWidth,n=t.items;this.wrapNode=s(this.contentEle),this.wrapNode!==document.body&&this.wrapNode||(this.wrapNode=window),this.setState({contentWidth:n.length*e}),this.list=new g({wrapEle:this.wrapNode,contentEle:this.contentEle,items:n,itemWidth:e}),this.update()}},{key:"bindEvents",value:function(){this.wrapNode.addEventListener("scroll",this.rafUpdate),this.wrapNode.addEventListener("resize",this.rafUpdate)}},{key:"removeEvents",value:function(){this.wrapNode.removeEventListener("scroll",this.rafUpdate),this.wrapNode.removeEventListener("resize",this.rafUpdate)}},{key:"update",value:function(){var t=this.props,e=t.items,n=t.itemWidth,r=this.list.getVisibleIndex(),o=r.startIdx,i=r.endIdx,a=this.state,s=a.startIdx,f=a.endIdx;if(o!==s||i!==f){var c=o*n;this.setState({leftOffset:c,startIdx:o,endIdx:i}),i>=e.length-1&&this.handleLoadMore()}}},{key:"render",value:function(){var t=this,e=this.state,n=e.loading,r=e.startIdx,i=e.endIdx,a=e.leftOffset,s=e.contentWidth,f=this.props,c=f.className,l=f.itemWidth,u=f.renderItem,d=f.items,p=f.indexKey,h=f.containerStyle,y=f.hasMore,v=f.renderLoader,m=d.slice(r,i+1),b="".concat(s,"px"),w="".concat(a,"px"),g={width:"".concat(l,"px"),boxSizing:"border-box"};return o.a.createElement("div",{className:c,style:S({width:"100%",overflowX:"scroll"},h)},o.a.createElement("div",{ref:function(e){t.contentEle=e},style:{width:b,paddingLeft:w,boxSizing:"border-box",display:"flex",flexDirection:"row",flexWrap:"nowrap"}},m.map((function(t,e){return o.a.createElement("div",{key:p(t),style:g},u(t,r+e))}))),v&&"function"==typeof v&&v({hasMore:y,loading:n}))}}])&&j(e.prototype,n),r&&j(e,r),a}(r.Component);N.propTypes={renderItem:a.a.func.isRequired,indexKey:a.a.func.isRequired,itemWidth:a.a.number,items:a.a.arrayOf(a.a.any).isRequired,containerStyle:a.a.objectOf(a.a.any),loadMore:a.a.func,hasMore:a.a.bool,renderLoader:a.a.func,className:a.a.string},N.defaultProps={itemWidth:0,containerStyle:null,loadMore:void 0,hasMore:void 0,renderLoader:void 0,className:void 0};e.default=b}])}));